视频推流SDK源码笔记：

StreamLiveCameraView


rtmp://192.168.3.83:1935/live/live1









ijkplayer:

除了可以定义surface



播放器的功能：

1. 底部控制栏，最基本的有：播放暂停按钮，切换到下一个视频按钮、进度条,手势拉进度的悬浮窗
2. 全屏播放按钮
3. 亮度控制seekbar
4. 声音控制条seekbar，按钮的话可以提供禁音，声音可以用物理键调节
6. 分辨率切换
7. 顶部栏：视频标题title，退出全屏返回按钮，重写onBackPressed方法覆盖返回按钮。
8. 网络加载进度
9. 锁住当前屏幕状态
10. 菜单(包括分辨率的选择列表、亮度、设置一些额外的属性：比如选集，选集是：连续剧或者广告，都会在播放一个视频后自动播放下一个视频，选集则是下面将要播放的列表集)
15. 截帧按钮


------------------- 额外设置 --------------------------

11. 动画广告层，静态广告悬浮窗，广告时长倒计时（vip跳广告按钮）
12. 弹幕层，包括弹幕输入按钮、禁止弹幕按钮
13. 分享按钮（微博、微信、朋友圈，链接）
14. 重新播放按钮？
16. 下载或者缓存选集
17. 自动跳过片头片尾？
18. 全屏模式和非全屏之间，悬浮窗布局样式是不一样的。




推流参数：
1. 流地址
2. 视频参数设置：
	1. 推流的码率（比特率）
	码率出自于音视频编码，指在1秒内传输的视频大小，在音视频编码时，会通过编码让音视频压缩，而码率正是决定音视频压缩比的关键因素，码率越高，音视频压缩越低，音视频音质保留得更好，但视频也越大，所以单位时间传输的视频大小就会大。
	在直播领域，我们经常看到普通、高清、蓝光，这些都是通过对音视频的码率进行控制输出的视频流，码率越高清晰度越好，但消耗的带宽也越高
	2. 推流的视频大小
	推流的视频大小有两种：
		1. 视频预览的大小
		2. 推到流服务器的视频大小
	3. 推流的帧率fps -- 一秒传输多张图片，fps越高，画面越流畅，特别在动作频繁的视频
	4. 推流的GOP关键帧间隔
	当画面花屏的时候，必须等到下一帧关键帧到达后才能刷新花屏的情况。因为一组GOP只有第一帧是关键帧，其他帧(I帧、P帧)都是通过编码算法处理的，通过第一帧或相邻帧算出本帧的内容。一般网络直播GOP间隔应该跟帧率相匹配或低
	5. 速率控制CBR和VBR
	前者是恒定比特率，一般适合于直播，恒定比特率可以让直播更加稳定，延时更低。但是缺点就是有时候画面间变化幅度大，而恒定比特率就会容易造成视频编码失真，导致直播画面质量不稳定。
	后者是可变比特率，适合于本地视频播放，对变化幅度较大的画面，给与更高的码率，而像新闻联播这种不动的画面就可以给与更低的码率，画面质量稳定，但是码率变化大。

3. 音频的参数
	1. 采样率
	1秒内对声音的采样次数，一般常常设置为441000， 采样次数越多，声音就越接近原声
	2. 采样深度
	用多少位来存储采样一个声音数据的大小，通常是8bit、16bit。深度越高，表达越精细，音质就越好
	3. 码率
	码率跟视频的码率一样，同样跟音视频的编码有关。音频的音质与码率正相关
	4. 音轨数量



视频预览：

1. 首先检查摄像头权限，并且检查设备是否有摄像头

2. 获取到摄像头后，需要对它的参数进行调整。如摄像头的方向、预览大小和方向需要做好调整，摄像机的sensor方向默认是横屏的，采集到的图片数据也是横屏的，需要通过parameter来设置一下采集的图片方向。
除了上面的参数，帧率范围、颜色空间的选择也是需要注意的，避免出现兼容性问题

3. 创建surfaceView或者sufaceTexture用来显示预览画面，setDisplay、setDisplayOrientation

4. 可以设置previewCallBack来获取预览的每一帧图片，然后可以在这里编码、推流或存储